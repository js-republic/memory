(this.webpackJsonpmemory=this.webpackJsonpmemory||[]).push([[0],{30:function(e,t,a){e.exports=a(55)},35:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},45:function(e,t,a){},46:function(e,t,a){},47:function(e,t,a){},48:function(e,t,a){},49:function(e,t,a){},50:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){},53:function(e,t,a){},54:function(e,t,a){},55:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(25),c=a.n(s),l=(a(35),a(18)),i=a.n(l),o=a(7),u=a(8),m=a(10),d=a(9),h=a(26),b=a(27),p=a(12),f=a(4);var g={users:[]};function v(e){var t=e.map((function(e){return e.guesses}));return(t=t.filter((function(e,a){return t.indexOf(e)===a}))).map((function(t){return e.filter((function(e){return e.guesses===t}))})).sort((function(e,t){return e[0].guesses-t[0].guesses})).reduce((function(e,t,a){return[].concat(Object(p.a)(e),Object(p.a)(t.map((function(e){return Object(f.a)(Object(f.a)({},e),{},{rating:a+1})}))))}),[])}function E(e){return localStorage.setItem("::memory::users",JSON.stringify(e)),e}var O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"LOAD_USERS":return Object(f.a)(Object(f.a)({},e),{},{users:JSON.parse(localStorage.getItem("::memory::users")||"[]")});case"UPDATE_USER":var a=Object(p.a)(e.users),n=t.payload.user,r=a.find((function(e){return e.name===n.name})),s=a.findIndex((function(e){return e.name===n.name}));return r?(a.splice(s,1,n),Object(f.a)(Object(f.a)({},e),{},{users:E(v(a))})):Object(f.a)(Object(f.a)({},e),{},{users:E(v([].concat(Object(p.a)(a),[n])))});case"DELETE_USERS":return Object(f.a)(Object(f.a)({},e),{},{users:E([])});default:return e}},N=Object(b.a)(O),j=a(13),k=a(1);a(38),a(39);var y=function(){return r.a.createElement("nav",{className:"nav"},r.a.createElement(j.b,{className:"nav-link",to:"/game"},"Game"),r.a.createElement(j.b,{className:"nav-link",to:"/stats"},"Stats"))},S=a(3),C=a(22),w=a.n(C),U=(a(45),a(46),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).baseState=void 0,n.handleChange=n.handleChange.bind(Object(S.a)(n)),n.handleSubmit=n.handleSubmit.bind(Object(S.a)(n)),n.baseState=n.state={value:"",disabled:!0},n}return Object(u.a)(a,[{key:"handleChange",value:function(e){var t=e.target.value.trim(),a=!t;this.setState({value:t,disabled:a})}},{key:"handleSubmit",value:function(e){e.preventDefault(),this.props.handleUsers(this.state.value.toLocaleLowerCase()),this.setState(this.baseState)}},{key:"render",value:function(){return r.a.createElement("form",{className:"form",onSubmit:this.handleSubmit},r.a.createElement("input",{className:"form-field",type:"text",autoFocus:!0,placeholder:"Name",value:this.state.value,onChange:this.handleChange}),r.a.createElement("button",{className:"form-button",type:"submit",disabled:this.state.disabled},"Save"))}}]),a}(r.a.Component));a(47);var P=function(e){return r.a.createElement("div",{className:"modal ".concat(e.isOpen?"show":"hide")},r.a.createElement("div",{className:"modal-container"},r.a.createElement("div",{className:"modal-header"},r.a.createElement("span",{className:"modal-title"},e.title),r.a.createElement("button",{className:"modal-button",type:"button",onClick:function(){return e.toggleModal()}},r.a.createElement("img",{className:"modal-img",src:"assets/close.png",alt:""}))),r.a.createElement("div",{className:"modal-content"},e.isText&&r.a.createElement("p",{className:"modal-text"},e.text),e.children)))},x=(a(48),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).handleClick=n.handleClick.bind(Object(S.a)(n)),n}return Object(u.a)(a,[{key:"handleClick",value:function(){this.props.restartGame()}},{key:"render",value:function(){return r.a.createElement("div",{className:"toolbar"},r.a.createElement("div",{className:"toolbar-counter"},r.a.createElement("div",{className:"toolbar-counter-container"},r.a.createElement("span",{className:"toolbar-counter-value"},this.props.guesses),r.a.createElement("span",{className:"toolbar-counter-legend"},this.props.guesses>1?"guesses":"guess")),r.a.createElement("div",{className:"toolbar-counter-container"},r.a.createElement("span",{className:"toolbar-counter-value"},this.props.pairs),r.a.createElement("span",{className:"toolbar-counter-legend"},"/8 pairs"))),r.a.createElement("button",{className:"toolbar-button",type:"button",onClick:this.handleClick},"Restart"))}}]),a}(r.a.Component));a(49);var M=function(e){return r.a.createElement("li",{className:"card-item ".concat(e.feedback),onClick:function(){return e.handleCard(e.card)}},r.a.createElement("div",{className:"card-item-front"},r.a.createElement("img",{className:"card-item-img",src:e.card.imgUrl,alt:""}),r.a.createElement("button",{className:"card-item-button",onClick:function(){return e.toggleModal(e.card.contentUrl)}},"more")),r.a.createElement("img",{className:"card-item-back",src:"assets/back.png",alt:""}))},D=(a(50),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).baseState=void 0,n.handleCard=n.handleCard.bind(Object(S.a)(n)),n.toggleModal=n.toggleModal.bind(Object(S.a)(n)),n.baseState=n.state={curPair:[],matchedCards:[],isOpen:!1,imgUrl:""},n}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e){e.cards!==this.props.cards&&this.setState(this.baseState)}},{key:"handleCard",value:function(e){var t=[].concat(Object(p.a)(this.state.curPair),[e]),a=this.state.matchedCards;a.includes(e)||t[0]===t[1]||(1===t.length&&this.setState({curPair:t}),2===t.length&&t[0].id===t[1].id&&(a=[].concat(Object(p.a)(a),[t[0],t[1]]),this.setState({curPair:t,matchedCards:a}),this.resetCurPair(),this.props.handleProgress(a)),2===t.length&&t[0].id!==t[1].id&&(this.setState({curPair:t}),this.resetCurPair(),this.props.handleProgress(a)))}},{key:"resetCurPair",value:function(){var e=this;setTimeout((function(){return e.setState({curPair:[]})}),750)}},{key:"getFeedback",value:function(e){var t=this.state,a=t.curPair,n=t.matchedCards;return a.includes(e)||n.includes(e)?"visible":"hidden"}},{key:"toggleModal",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";this.setState({isOpen:!this.state.isOpen,imgUrl:e})}},{key:"render",value:function(){var e=this;return r.a.createElement("ul",{className:"card-list"},this.props.cards.map((function(t,a){return r.a.createElement(M,{key:a,card:t,feedback:e.getFeedback(t),handleCard:e.handleCard,toggleModal:e.toggleModal})})),r.a.createElement(P,{title:"UX-Card details",text:"",isText:!1,isOpen:this.state.isOpen,toggleModal:this.toggleModal},r.a.createElement("a",{href:"https://www.ux-republic.com/nos-offres/",target:"_blank",rel:"noreferrer noopener"},r.a.createElement("img",{src:this.state.imgUrl,alt:""}))))}}]),a}(r.a.Component)),R=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={cards:n.generateNewPairs(n.props.cards),pairs:0,guesses:0,isOpen:!1},n.restartGame=n.restartGame.bind(Object(S.a)(n)),n.toggleModal=n.toggleModal.bind(Object(S.a)(n)),n.handleUsers=n.handleUsers.bind(Object(S.a)(n)),n.handleProgress=n.handleProgress.bind(Object(S.a)(n)),n}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e){e.cards!==this.props.cards&&this.setState({cards:this.generateNewPairs(this.props.cards)})}},{key:"generateNewPairs",value:function(e){var t=w.a.shuffle(e).slice(0,8);return w.a.shuffle(t.reduce((function(e,t){return[].concat(Object(p.a)(e),[Object(f.a)({},t),Object(f.a)({},t)])}),[]))}},{key:"restartGame",value:function(){this.setState({cards:this.generateNewPairs(this.props.cards),guesses:0,pairs:0,isOpen:!1})}},{key:"toggleModal",value:function(){this.setState({isOpen:!this.state.isOpen})}},{key:"handleProgress",value:function(e){this.setState({guesses:this.state.guesses+1,pairs:e.length/2}),this.state.cards.length===e.length&&this.toggleModal()}},{key:"handleUsers",value:function(e){var t=this.state.guesses;N.dispatch({type:"UPDATE_USER",payload:{user:{name:e,date:(new Date).toLocaleString(),guesses:t,rating:0}}}),this.setState({isOpen:!1}),this.props.history.push("/stats")}},{key:"render",value:function(){return r.a.createElement("section",{className:"game"},r.a.createElement(x,{pairs:this.state.pairs,guesses:this.state.guesses,restartGame:this.restartGame}),r.a.createElement(D,{cards:this.state.cards,handleProgress:this.handleProgress}),r.a.createElement(P,{title:"Save your game",text:"Congratulations !",isText:!0,isOpen:this.state.isOpen,toggleModal:this.toggleModal},r.a.createElement(U,{handleUsers:this.handleUsers})))}}]),a}(r.a.Component),_=Object(k.f)(R);a(51);var G=function(e){return r.a.createElement("table",{className:"table"},r.a.createElement("thead",{className:"table-header"},r.a.createElement("tr",{className:"table-row"},r.a.createElement("th",{className:"table-cell"},"Name"),r.a.createElement("th",{className:"table-cell"},"Rating"),r.a.createElement("th",{className:"table-cell"},"Guesses"),r.a.createElement("th",{className:"table-cell"},"Date"),r.a.createElement("th",{className:"table-cell"},r.a.createElement("button",{className:"table-button",onClick:e.handleClick},"Clear")))),r.a.createElement("tbody",{className:"table-body"},e.users.map((function(e,t){return r.a.createElement("tr",{className:"table-row",key:t},r.a.createElement("td",{className:"table-cell"},e.name),r.a.createElement("td",{className:"table-cell"},e.rating),r.a.createElement("td",{className:"table-cell"},e.guesses),r.a.createElement("td",{className:"table-cell"},e.date),r.a.createElement("td",{className:"table-cell"}))}))))},L=(a(52),function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).unsubscribe=void 0,e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.unsubscribe=N.subscribe((function(){return e.forceUpdate()}))}},{key:"componentWillUnmount",value:function(){this.unsubscribe()}},{key:"handleClick",value:function(){N.dispatch({type:"DELETE_USERS",payload:{}})}},{key:"render",value:function(){var e=N.getState().users;return r.a.createElement("section",{className:"stats"},0===e.length?r.a.createElement(j.b,{className:"stats-link",to:"/game"},"Start"):r.a.createElement(G,{users:e,handleClick:this.handleClick}))}}]),a}(r.a.Component));a(53);var T=function(e){return r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header-title"},r.a.createElement("span",{className:"header-name"},"UX"),r.a.createElement("span",{className:"header-game"},"memory")),e.children)};a(54);var A=function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("a",{href:"https://www.ux-republic.com/",target:"_blank",rel:"noreferrer noopener"},r.a.createElement("img",{className:"footer-logo",src:"assets/logo.png",alt:"Logo UX-Republic"})),r.a.createElement("span",null,"by",r.a.createElement("a",{className:"footer-author",href:"https://fr.linkedin.com/in/nlsbienaime",target:"_blank",rel:"noreferrer noopener"},"Nicolas Bienaime")))};function I(){return(I=Object(h.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("data/cards.json").then((function(e){return e.json()}));case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var J=function(e){Object(m.a)(a,e);var t=Object(d.a)(a);function a(){var e;Object(o.a)(this,a);for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return(e=t.call.apply(t,[this].concat(r))).state={cards:[]},e}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;(function(){return I.apply(this,arguments)})().then((function(t){return e.setState({cards:t})})),N.dispatch({type:"LOAD_USERS",payload:{}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"app"},r.a.createElement(j.a,null,r.a.createElement(T,null,r.a.createElement(y,null)),r.a.createElement(k.b,{exact:!0,path:"/",render:function(){return r.a.createElement(k.a,{to:"/game"})}}),r.a.createElement(k.b,{exact:!0,path:"/game",render:function(){return r.a.createElement(_,{cards:e.state.cards})}}),r.a.createElement(k.b,{exact:!0,path:"/stats",render:function(){return r.a.createElement(L,null)}}),r.a.createElement(A,null)))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(J,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[30,1,2]]]);
//# sourceMappingURL=main.d548df41.chunk.js.map